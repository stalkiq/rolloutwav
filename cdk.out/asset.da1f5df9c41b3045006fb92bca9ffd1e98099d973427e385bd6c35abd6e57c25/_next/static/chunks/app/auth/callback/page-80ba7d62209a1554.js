(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var a=o(5155),r=o(2115),n=o(5695),c=o(9323);function i(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)();return(0,r.useEffect)(()=>{let o=t.get("code");(async()=>{try{o&&await (0,c.R$)(o),e.replace("/dashboard")}catch(t){e.replace("/login")}})()},[e,t]),null}function s(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(i,{})})}},4850:(e,t,o)=>{Promise.resolve().then(o.bind(o,447))},5695:(e,t,o)=>{"use strict";var a=o(8999);o.o(a,"useParams")&&o.d(t,{useParams:function(){return a.useParams}}),o.o(a,"useRouter")&&o.d(t,{useRouter:function(){return a.useRouter}}),o.o(a,"useSearchParams")&&o.d(t,{useSearchParams:function(){return a.useSearchParams}})},9323:(e,t,o)=>{"use strict";o.d(t,{CI:()=>u,Ht:()=>l,R$:()=>s,c$:()=>i});let a="rollout-016442247702-us-west-2.auth.us-west-2.amazoncognito.com",r="1m9ih2q5074gl4cuhvb64hfnta";function n(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function c(e){let t=new TextEncoder().encode(e);return n(await crypto.subtle.digest("SHA-256",t))}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n(crypto.getRandomValues(new Uint8Array(32)).buffer),o=await c(t);localStorage.setItem("pkce_verifier",t);let i=new URLSearchParams({client_id:r,response_type:"code",scope:"openid email profile",redirect_uri:"".concat(window.location.origin,"/auth/callback/"),code_challenge_method:"S256",code_challenge:o});e.signup&&i.set("screen_hint","signup"),e.idp&&i.set("identity_provider",e.idp),window.location.href="https://".concat(a,"/oauth2/authorize?").concat(i.toString())}async function s(e){let t=new URLSearchParams({grant_type:"authorization_code",client_id:r,code:e,code_verifier:localStorage.getItem("pkce_verifier")||"",redirect_uri:"".concat(window.location.origin,"/auth/callback/")}),o=await fetch("https://".concat(a,"/oauth2/token"),{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:t});if(!o.ok)throw Error("Token exchange failed");let n=await o.json(),c=Math.floor(Date.now()/1e3)+(n.expires_in||3600);localStorage.setItem("id_token",n.id_token),localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token||""),localStorage.setItem("token_expires_at",String(c))}function l(){return{idToken:localStorage.getItem("id_token")||void 0,accessToken:localStorage.getItem("access_token")||void 0}}function u(){localStorage.removeItem("id_token"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_expires_at");let e=new URLSearchParams({client_id:r,logout_uri:"".concat(window.location.origin,"/")});window.location.href="https://".concat(a,"/logout?").concat(e.toString())}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4850)),_N_E=e.O()}]);