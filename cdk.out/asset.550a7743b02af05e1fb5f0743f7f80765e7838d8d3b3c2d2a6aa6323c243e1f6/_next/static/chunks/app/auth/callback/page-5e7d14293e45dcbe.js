(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(5155),o=a(2115),n=a(5695),c=a(9323);function i(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)();return(0,o.useEffect)(()=>{let a=t.get("code");(async()=>{try{a&&await (0,c.R$)(a),e.replace("/dashboard")}catch(t){e.replace("/login")}})()},[e,t]),null}function s(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(i,{})})}},4850:(e,t,a)=>{Promise.resolve().then(a.bind(a,447))},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},9323:(e,t,a)=>{"use strict";a.d(t,{R$:()=>s,c$:()=>i});let r="rollout-016442247702-us-west-2.auth.us-west-2.amazoncognito.com",o="1m9ih2q5074gl4cuhvb64hfnta";function n(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function c(e){let t=new TextEncoder().encode(e);return n(await crypto.subtle.digest("SHA-256",t))}async function i(){let e=n(crypto.getRandomValues(new Uint8Array(32)).buffer),t=await c(e);localStorage.setItem("pkce_verifier",e);let a=new URLSearchParams({client_id:o,response_type:"code",scope:"openid email profile",redirect_uri:"".concat(window.location.origin,"/auth/callback/"),code_challenge_method:"S256",code_challenge:t});window.location.href="https://".concat(r,"/oauth2/authorize?").concat(a.toString())}async function s(e){let t=new URLSearchParams({grant_type:"authorization_code",client_id:o,code:e,code_verifier:localStorage.getItem("pkce_verifier")||"",redirect_uri:"".concat(window.location.origin,"/auth/callback/")}),a=await fetch("https://".concat(r,"/oauth2/token"),{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:t});if(!a.ok)throw Error("Token exchange failed");let n=await a.json(),c=Math.floor(Date.now()/1e3)+(n.expires_in||3600);localStorage.setItem("id_token",n.id_token),localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token||""),localStorage.setItem("token_expires_at",String(c))}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4850)),_N_E=e.O()}]);