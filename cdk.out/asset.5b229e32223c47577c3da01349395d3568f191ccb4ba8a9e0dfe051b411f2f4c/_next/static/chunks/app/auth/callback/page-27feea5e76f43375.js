(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var o=a(5155),r=a(2115),n=a(5695),c=a(9323);function i(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)();return(0,r.useEffect)(()=>{let a=t.get("code");(async()=>{try{a&&await (0,c.R$)(a),e.replace("/dashboard")}catch(t){e.replace("/login")}})()},[e,t]),null}function s(){return(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:(0,o.jsx)(i,{})})}},4850:(e,t,a)=>{Promise.resolve().then(a.bind(a,447))},5695:(e,t,a)=>{"use strict";var o=a(8999);a.o(o,"useParams")&&a.d(t,{useParams:function(){return o.useParams}}),a.o(o,"useRouter")&&a.d(t,{useRouter:function(){return o.useRouter}}),a.o(o,"useSearchParams")&&a.d(t,{useSearchParams:function(){return o.useSearchParams}})},9323:(e,t,a)=>{"use strict";a.d(t,{Ht:()=>l,R$:()=>s,c$:()=>i});let o="rollout-016442247702-us-west-2.auth.us-west-2.amazoncognito.com",r="1m9ih2q5074gl4cuhvb64hfnta";function n(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function c(e){let t=new TextEncoder().encode(e);return n(await crypto.subtle.digest("SHA-256",t))}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n(crypto.getRandomValues(new Uint8Array(32)).buffer),a=await c(t);localStorage.setItem("pkce_verifier",t);let i=new URLSearchParams({client_id:r,response_type:"code",scope:"openid email profile",redirect_uri:"".concat(window.location.origin,"/auth/callback/"),code_challenge_method:"S256",code_challenge:a});e.signup&&i.set("screen_hint","signup"),e.idp&&i.set("identity_provider",e.idp),window.location.href="https://".concat(o,"/oauth2/authorize?").concat(i.toString())}async function s(e){let t=new URLSearchParams({grant_type:"authorization_code",client_id:r,code:e,code_verifier:localStorage.getItem("pkce_verifier")||"",redirect_uri:"".concat(window.location.origin,"/auth/callback/")}),a=await fetch("https://".concat(o,"/oauth2/token"),{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:t});if(!a.ok)throw Error("Token exchange failed");let n=await a.json(),c=Math.floor(Date.now()/1e3)+(n.expires_in||3600);localStorage.setItem("id_token",n.id_token),localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token||""),localStorage.setItem("token_expires_at",String(c))}function l(){return{idToken:localStorage.getItem("id_token")||void 0,accessToken:localStorage.getItem("access_token")||void 0}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4850)),_N_E=e.O()}]);